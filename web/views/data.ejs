<html>
<head>
    <meta charset="utf-8"/>
    <title>Chart.js demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Dashboard</a>
    </div>
    <ul class="nav navbar-nav">

    </ul>
  </div>
</nav>
    <h1>Admin Dashboard Example</h1>
    <canvas id="bar-chartcanvas" width="600" height="300"></canvas>
    <br>
    <br>
    <br>

    <canvas id="doughnut-chart" width="600" height="300"></canvas>

    <script>

  var donut1 = document.getElementById("doughnut-chart").getContext("2d");

  new Chart(document.getElementById("doughnut-chart").getContext("2d"), {
      type: 'doughnut',
      data: {
        labels: ["Africa", "Asia", "Europe", "Latin America", "North America"],
        datasets: [
          {
            label: "Population (millions)",
            backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
            data: [2478,5267,734,784,433]
          }
        ]
      },
      options: {
        title: {
          display: true,
          text: 'Predicted world population (millions) in 2050'
        }
      }
  });


    var data1;
  fetch('http://localhost:3000/graphData')
    .then((response) => {
      return response.json();
    })
    .then((returnedData) => {
      data1 = returnedData;
      console.log(data);
    var ctx = document.getElementById("bar-chartcanvas").getContext("2d");

        var data = {
        labels : ["match1", "match2", "match3", "match4", "match5"],
        datasets : [
          {
            label : "TeamA score",
            data : data1,
            backgroundColor : [
              "red",
              "green",
              "blue",
              "purple",
              "magenta"
            ],
            borderColor : [
              "#111",
              "#111",
              "#111",
              "#111",
              "#111"
            ],
            borderWidth : 1
          }
        ]
      };

      var options = {
        title : {
          display : true,
          position : "top",
          text : "Multicolor Bar Graph",
          fontSize : 18,
          fontColor : "#111"
        },
        legend : {
          display : false
        },
        scales : {
          yAxes : [{
            ticks : {
              min : 0
            }
          }]
        }
      };
      var chart = new Chart( ctx, {
        scales: {
          yAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'probability'
            }
          }],
          xAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'hola'
            }
          }],
        },
        type : "bar",
        data : data,
        options : options
      });
    });

    // var ctx = document.getElementById("bar-chartcanvas").getContext("2d");

console.log("Init Graph")
  //       var data = {
  //   labels : ["match1", "match2", "match3", "match4", "match5"],
  //   datasets : [
  //     {
  //       label : "TeamA score",
  //       data : data1,
  //       backgroundColor : [
  //         "red",
  //         "green",
  //         "blue",
  //         "purple",
  //         "magenta"
  //       ],
  //       borderColor : [
  //         "#111",
  //         "#111",
  //         "#111",
  //         "#111",
  //         "#111"
  //       ],
  //       borderWidth : 1
  //     }
  //   ]
  // };

  // var options = {
  //   title : {
  //     display : true,
  //     position : "top",
  //     text : "Multicolor Bar Graph",
  //     fontSize : 18,
  //     fontColor : "#111"
  //   },
  //   legend : {
  //     display : false
  //   },
  //   scales : {
  //     yAxes : [{
  //       ticks : {
  //         min : 0
  //       }
  //     }]
  //   }
  // };
  // var chart = new Chart( ctx, {
  //   type : "bar",
  //   data : data,
  //   options : options
  // });
    </script>

</body>
<!-- 
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="/data.css">
<title>Admin Dashboard</title>
<script src="https://d3js.org/d3.v5.min.js"></script>

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link href="css/default.css" rel="stylesheet">

<nav class="navbar navbar-default" role="navigation">
<div class="container-fluid">

    <div class="navbar-header">
        <a class="navbar-brand" href="/console">
            <span class="glyphicon glyphicon glyphicon-apple"></span>
            Dashboard
        </a>

    </div>
</div>
</nav>




<main>


<div id="tables" style="padding-left: 300px"> 

<table class="table table-hover table-bordered" style="width: 80%; padding-left:200px">
	<caption style="font-weight:bold; color: blue; font-size: 25px">Top Users by Number of Posts</caption>
  <thead>
    <tr class="table-primary">
      <th scope="col">Username</th>
      <th scope="col">Number of Posts</th>
    </tr>
  </thead>
  <tbody>
  	<% var topUsersByNumPosts = stats[0]%>

	<% for(var i=0; i < topUsersByNumPosts.length; i++) { %>
	<% 		var user = topUsersByNumPosts[i]%>
    <tr>
      <td><%= user[0] %></td>
      <td><%= user[1] %></td>
    </tr>
    <% } %>
  </tbody>
</table>

<br>
<br>

<table class="table table-hover table-bordered" style="width: 80%; padding-left:200px">
	<caption style="font-weight:bold; color: red; font-size: 25px">Top Locations by Number of Posts</caption>
  <thead>
    <tr class="table-primary">
      <th scope="col">Location</th>
      <th scope="col">Number of Posts</th>
    </tr>
  </thead>
  <tbody>
  	<% var topLocationsByNumPosts = stats[1]%>

	<% for(var i=0; i < topLocationsByNumPosts.length; i++) { %>
	<% 		var location = topLocationsByNumPosts[i]%>
    <tr>
      <td><%= location[0] %></td>
      <td><%= location[1] %></td>
    </tr>
    <% } %>
  </tbody>
</table>


<br>

<br>

<table class="table table-hover table-bordered" style="width: 80%; padding-left:200px">
	<caption style="font-weight:bold; color: green; font-size: 25px">Top Locations by Number of Users</caption>
  <thead>
    <tr class="table-primary">
      <th scope="col">Location</th>
      <th scope="col">Number of Users</th>
    </tr>
  </thead>
  <tbody>
  	<% var topLocationsByNumUsers = stats[2]%>

	<% for(var i=0; i < topLocationsByNumUsers.length; i++) { %>
	<% 		var location = topLocationsByNumUsers[i]%>
    <tr>
      <td><%= location[0] %></td>
      <td><%= location[1] %></td>
    </tr>
    <% } %>
  </tbody>
</table>

</div>

</main>

<br>
<br>

<p class="text-center text-muted">CIS 350 Final Project</p>


</html>
 -->